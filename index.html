<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global News Dash | Top 195 GDP</title>
    <style>
        body { font-family: 'Inter', sans-serif; background: #0f172a; color: white; padding: 20px; }
        h1 { text-align: center; color: #38bdf8; margin-bottom: 10px; }
        .search-container { text-align: center; margin-bottom: 30px; }
        #searchBar { padding: 12px; width: 300px; border-radius: 8px; border: 1px solid #334155; background: #1e293b; color: white; outline: none; }
        #searchBar:focus { border-color: #38bdf8; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 20px; }
        .card { background: #1e293b; border: 1px solid #334155; padding: 20px; border-radius: 12px; transition: 0.3s; cursor: pointer; display: flex; flex-direction: column; }
        .card:hover { border-color: #38bdf8; transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.3); }
        .rank { font-size: 0.75rem; color: #94a3b8; font-weight: bold; letter-spacing: 1px; }
        .country { font-size: 1.3rem; font-weight: bold; margin: 10px 0; color: #f8fafc; }
        .headline { font-size: 0.9rem; color: #cbd5e1; line-height: 1.5; border-top: 1px solid #334155; padding-top: 15px; margin-top: auto; min-height: 60px; }
        .hidden { display: none; }
    </style>
</head>
<body>

    <h1>Global News Pulse</h1>
    <div class="search-container">
        <input type="text" id="searchBar" placeholder="Search country or rank..." onkeyup="filterCountries()">
    </div>

    <div class="grid" id="news-grid"></div>

    <script>
        const countries = [
            "USA", "China", "Germany", "India", "Japan", "UK", "France", "Italy", "Russia", "Canada",
            "Brazil", "Spain", "Mexico", "Australia", "South Korea", "Turkey", "Indonesia", "Netherlands", "Saudi Arabia", "Poland",
            "Switzerland", "Taiwan", "Belgium", "Ireland", "Sweden", "Argentina", "Israel", "Singapore", "Austria", "UAE",
            "Thailand", "Norway", "Philippines", "Bangladesh", "Vietnam", "Malaysia", "Denmark", "Colombia", "Hong Kong", "Romania",
            "South Africa", "Czech Republic", "Pakistan", "Egypt", "Iran", "Portugal", "Chile", "Finland", "Nigeria", "Peru",
            "Kazakhstan", "Greece", "Algeria", "New Zealand", "Iraq", "Hungary", "Qatar", "Ukraine", "Cuba", "Morocco",
            "Slovakia", "Kuwait", "Uzbekistan", "Bulgaria", "Kenya", "Dominican Republic", "Ecuador", "Guatemala", "Puerto Rico", "Ethiopia",
            "Ghana", "Croatia", "Serbia", "CÃ´te d'Ivoire", "Angola", "Costa Rica", "Oman", "Luxembourg", "Lithuania", "Sri Lanka",
            "Panama", "Tanzania", "Azerbaijan", "Turkmenistan", "Belarus", "Uruguay", "DR Congo", "Jordan", "Tunisia", "Myanmar",
            "Cameroon", "Uganda", "Libya", "Bolivia", "Latvia", "Bahrain", "Paraguay", "Estonia", "Nepal", "Macao",
            "El Salvador", "Honduras", "Senegal", "Papua New Guinea", "Cyprus", "Cambodia", "Zambia", "Iceland", "Zimbabwe", "Trinidad and Tobago",
            "Bosnia and Herzegovina", "Georgia", "Sudan", "Gabon", "Albania", "Guyana", "Botswana", "Laos", "Burkina Faso", "Mali",
            "Armenia", "Mauritius", "Benin", "Malta", "Bahamas", "North Macedonia", "South Sudan", "Mongolia", "Guinea", "Madagascar",
            "Brunei", "Moldova", "Niger", "Chad", "Rwanda", "Malawi", "Mauritania", "Haiti", "Tajikistan", "Kyrgyzstan",
            "Kosovo", "Nicaragua", "Somalia", "Montenegro", "Togo", "Fiji", "Barbados", "Suriname", "Maldives", "Eswatini",
            "Sierra Leone", "Liberia", "Burundi", "Andorra", "Djibouti", "Bhutan", "Gambia", "Central African Republic", "Lesotho",
            "Belize", "Timor-Leste", "Saint Lucia", "Cabo Verde", "Seychelles", "Antigua and Barbuda", "San Marino", "Guinea-Bissau", "Solomon Islands", "Grenada",
            "Comoros", "Saint Kitts and Nevis", "Vanuatu", "Samoa", "Saint Vincent and the Grenadines", "Dominica", "Sao Tome and Principe", "Tonga", "Micronesia", "Marshall Islands",
            "Palau", "Kiribati", "Nauru", "Tuvalu", "Holy See"
        ];

        const grid = document.getElementById('news-grid');

        countries.forEach((name, index) => {
            const card = document.createElement('div');
            card.className = 'card';
            card.setAttribute('data-name', name.toLowerCase());
            card.setAttribute('data-rank', index + 1);
            card.innerHTML = `
                <div class="rank">RANK #${index + 1}</div>
                <span class="country">${name}</span>
                <div class="headline" id="news-${index}">Click for breaking news...</div>
            `;
            card.onclick = () => fetchNews(name, index);
            grid.appendChild(card);
        });

        function filterCountries() {
            const input = document.getElementById('searchBar').value.toLowerCase();
            const cards = document.querySelectorAll('.card');
            cards.forEach(card => {
                const name = card.getAttribute('data-name');
                const rank = card.getAttribute('data-rank');
                if (name.includes(input) || rank.includes(input)) {
                    card.classList.remove('hidden');
                } else {
                    card.classList.add('hidden');
                }
            });
        }

        async function fetchNews(country, id) {
            const display = document.getElementById(`news-${id}`);
            const myApiKey = 'eb1266c535724ee2b405c8bf8d819715'; 
            display.innerText = "Searching global wires...";

            try {
                // NewsAPI free tier blocks direct browser calls, so we use a proxy
                const targetUrl = `https://newsapi.org{country}&sortBy=publishedAt&pageSize=1&apiKey=${myApiKey}`;
                const proxyUrl = `https://api.allorigins.win{encodeURIComponent(targetUrl)}`;
                
                const response = await fetch(proxyUrl);
                const proxyData = await response.json();
                const data = JSON.parse(proxyData.contents);
                
                if (data.articles && data.articles.length > 0) {
                    display.innerText = data.articles[0].title;
                } else {
                    display.innerText = "No specific headlines found for this region today.";
                }
            } catch (e) {
                display.innerText = "Daily limit reached or connection lost.";
            }
        }
    </script>
</body>
</html>
